; SPIR-V
; Version: 1.0
; Generator: Khronos Glslang Reference Front End; 11
; Bound: 587
; Schema: 0
               OpCapability Shader
               OpCapability ImageQuery
          %1 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint Fragment %main "main" %directionalLightSpacePositions %viewDirectionNormal %fragPosition %FragColour %texCoord %TBN
               OpExecutionMode %main OriginLowerLeft
               OpSource GLSL 430
               OpName %main "main"
               OpName %ShadowCalculation_vf4_vf3_s21_vf3_ "ShadowCalculation(vf4;vf3;s21;vf3;"
               OpName %lightSpacePos "lightSpacePos"
               OpName %lightDir "lightDir"
               OpName %shadowMap "shadowMap"
               OpName %normal "normal"
               OpName %DistrubutionGGX_vf3_vf3_f1_ "DistrubutionGGX(vf3;vf3;f1;"
               OpName %N "N"
               OpName %H "H"
               OpName %a "a"
               OpName %FresnelSchlick_f1_vf3_ "FresnelSchlick(f1;vf3;"
               OpName %cosTheta "cosTheta"
               OpName %F0 "F0"
               OpName %FresnelSchlickRoughness_f1_vf3_f1_ "FresnelSchlickRoughness(f1;vf3;f1;"
               OpName %cosTheta_0 "cosTheta"
               OpName %baseReflectivity "baseReflectivity"
               OpName %roughness "roughness"
               OpName %SchlickGGXRoughnessRemapperDirect_f1_ "SchlickGGXRoughnessRemapperDirect(f1;"
               OpName %a_0 "a"
               OpName %GeometrySchlickGGX_f1_f1_ "GeometrySchlickGGX(f1;f1;"
               OpName %NdotV "NdotV"
               OpName %k "k"
               OpName %GeometrySmith_vf3_vf3_vf3_f1_ "GeometrySmith(vf3;vf3;vf3;f1;"
               OpName %N_0 "N"
               OpName %V "V"
               OpName %L "L"
               OpName %k_0 "k"
               OpName %CookTorranceBRDF_vf3_vf3_vf3_vf3_vf3_vf3_vf3_f1_f1_f1_i1_ "CookTorranceBRDF(vf3;vf3;vf3;vf3;vf3;vf3;vf3;f1;f1;f1;i1;"
               OpName %N_1 "N"
               OpName %H_0 "H"
               OpName %F0_0 "F0"
               OpName %V_0 "V"
               OpName %Wi "Wi"
               OpName %Li "Li"
               OpName %albedo "albedo"
               OpName %k_1 "k"
               OpName %a_1 "a"
               OpName %metallic "metallic"
               OpName %i "i"
               OpName %projectedCoords "projectedCoords"
               OpName %closestDepth "closestDepth"
               OpName %currentDepth "currentDepth"
               OpName %shadowBias "shadowBias"
               OpName %shadow "shadow"
               OpName %texelSize "texelSize"
               OpName %x "x"
               OpName %y "y"
               OpName %pcfDepth "pcfDepth"
               OpName %aPow2 "aPow2"
               OpName %NdotH "NdotH"
               OpName %NdotHPow2 "NdotHPow2"
               OpName %denominator "denominator"
               OpName %NdotV_0 "NdotV"
               OpName %NdotL "NdotL"
               OpName %ggx1 "ggx1"
               OpName %ggx2 "ggx2"
               OpName %F "F"
               OpName %G "G"
               OpName %D "D"
               OpName %cosTheta_1 "cosTheta"
               OpName %kS "kS"
               OpName %kD "kD"
               OpName %specular "specular"
               OpName %shadow_0 "shadow"
               OpName %directionalLightSpacePositions "directionalLightSpacePositions"
               OpName %u_DirectShadowMaps "u_DirectShadowMaps"
               OpName %N_2 "N"
               OpName %viewDirectionNormal "viewDirectionNormal"
               OpName %V_1 "V"
               OpName %PointLight "PointLight"
               OpMemberName %PointLight 0 "colour"
               OpMemberName %PointLight 1 "position"
               OpMemberName %PointLight 2 "constant"
               OpMemberName %PointLight 3 "linear"
               OpMemberName %PointLight 4 "quadratic"
               OpName %DirectLight "DirectLight"
               OpMemberName %DirectLight 0 "colour"
               OpMemberName %DirectLight 1 "position"
               OpMemberName %DirectLight 2 "direction"
               OpName %UniformBufferObject "UniformBufferObject"
               OpMemberName %UniformBufferObject 0 "u_PointLights"
               OpMemberName %UniformBufferObject 1 "u_DirectLights"
               OpMemberName %UniformBufferObject 2 "u_CameraPosition"
               OpMemberName %UniformBufferObject 3 "u_Albedo"
               OpMemberName %UniformBufferObject 4 "u_Emissive"
               OpMemberName %UniformBufferObject 5 "u_Roughness"
               OpMemberName %UniformBufferObject 6 "u_Metallic"
               OpMemberName %UniformBufferObject 7 "u_AmbientOcclusion"
               OpMemberName %UniformBufferObject 8 "u_Alpha"
               OpMemberName %UniformBufferObject 9 "u_DirectLightsCount"
               OpMemberName %UniformBufferObject 10 "u_PointLightsCount"
               OpName %ubo "ubo"
               OpName %fragPosition "fragPosition"
               OpName %roughness_0 "roughness"
               OpName %metallic_0 "metallic"
               OpName %albedo_0 "albedo"
               OpName %F0_1 "F0"
               OpName %Lo "Lo"
               OpName %i_0 "i"
               OpName %Wi_0 "Wi"
               OpName %H_1 "H"
               OpName %Li_0 "Li"
               OpName %k_2 "k"
               OpName %i_1 "i"
               OpName %lightPosition "lightPosition"
               OpName %Wi_1 "Wi"
               OpName %H_2 "H"
               OpName %distance "distance"
               OpName %attenuation "attenuation"
               OpName %Li_1 "Li"
               OpName %k_3 "k"
               OpName %fresnel "fresnel"
               OpName %kS_0 "kS"
               OpName %kD_0 "kD"
               OpName %irradiance "irradiance"
               OpName %u_IrradianceMap "u_IrradianceMap"
               OpName %diffuse "diffuse"
               OpName %R "R"
               OpName %prefilteredColour "prefilteredColour"
               OpName %u_PrefilterMap "u_PrefilterMap"
               OpName %brdf "brdf"
               OpName %u_BRDFLookupTexture "u_BRDFLookupTexture"
               OpName %specular_0 "specular"
               OpName %ambient "ambient"
               OpName %colour "colour"
               OpName %FragColour "FragColour"
               OpName %texCoord "texCoord"
               OpName %TBN "TBN"
               OpName %u_AlbedoMap "u_AlbedoMap"
               OpName %u_RoughnessMap "u_RoughnessMap"
               OpName %u_NormalMap "u_NormalMap"
               OpName %u_MetallicMap "u_MetallicMap"
               OpDecorate %directionalLightSpacePositions Location 6
               OpDecorate %u_DirectShadowMaps Location 7
               OpDecorate %u_DirectShadowMaps DescriptorSet 0
               OpDecorate %u_DirectShadowMaps Binding 0
               OpDecorate %viewDirectionNormal Location 2
               OpDecorate %fragPosition Location 1
               OpDecorate %u_IrradianceMap Location 4
               OpDecorate %u_IrradianceMap DescriptorSet 0
               OpDecorate %u_IrradianceMap Binding 0
               OpDecorate %u_PrefilterMap Location 5
               OpDecorate %u_PrefilterMap DescriptorSet 0
               OpDecorate %u_PrefilterMap Binding 0
               OpDecorate %u_BRDFLookupTexture Location 6
               OpDecorate %u_BRDFLookupTexture DescriptorSet 0
               OpDecorate %u_BRDFLookupTexture Binding 0
               OpDecorate %FragColour Location 0
               OpDecorate %texCoord Location 0
               OpDecorate %TBN Location 3
               OpDecorate %u_AlbedoMap Location 0
               OpDecorate %u_AlbedoMap DescriptorSet 0
               OpDecorate %u_AlbedoMap Binding 0
               OpDecorate %u_RoughnessMap Location 1
               OpDecorate %u_RoughnessMap DescriptorSet 0
               OpDecorate %u_RoughnessMap Binding 0
               OpDecorate %u_NormalMap Location 2
               OpDecorate %u_NormalMap DescriptorSet 0
               OpDecorate %u_NormalMap Binding 0
               OpDecorate %u_MetallicMap Location 3
               OpDecorate %u_MetallicMap DescriptorSet 0
               OpDecorate %u_MetallicMap Binding 0
       %void = OpTypeVoid
          %3 = OpTypeFunction %void
      %float = OpTypeFloat 32
    %v4float = OpTypeVector %float 4
    %v3float = OpTypeVector %float 3
          %9 = OpTypeImage %float 2D 0 0 0 1 Unknown
         %10 = OpTypeSampledImage %9
%_ptr_UniformConstant_10 = OpTypePointer UniformConstant %10
         %12 = OpTypeFunction %float %v4float %v3float %_ptr_UniformConstant_10 %v3float
         %19 = OpTypeFunction %float %v3float %v3float %float
         %25 = OpTypeFunction %v3float %float %v3float
         %30 = OpTypeFunction %v3float %float %v3float %float
         %36 = OpTypeFunction %float %float
         %40 = OpTypeFunction %float %float %float
         %45 = OpTypeFunction %float %v3float %v3float %v3float %float
        %int = OpTypeInt 32 1
         %53 = OpTypeFunction %v3float %v3float %v3float %v3float %v3float %v3float %v3float %v3float %float %float %float %int
%_ptr_Function_v3float = OpTypePointer Function %v3float
       %uint = OpTypeInt 32 0
     %uint_3 = OpConstant %uint 3
  %float_0_5 = OpConstant %float 0.5
     %uint_2 = OpConstant %uint 2
%_ptr_Function_float = OpTypePointer Function %float
    %float_1 = OpConstant %float 1
       %bool = OpTypeBool
    %float_0 = OpConstant %float 0
    %v2float = OpTypeVector %float 2
     %uint_0 = OpConstant %uint 0
%float_0_0500000007 = OpConstant %float 0.0500000007
%float_0_00499999989 = OpConstant %float 0.00499999989
%_ptr_Function_v2float = OpTypePointer Function %v2float
      %int_0 = OpConstant %int 0
      %v2int = OpTypeVector %int 2
%_ptr_Function_int = OpTypePointer Function %int
     %int_n1 = OpConstant %int -1
      %int_1 = OpConstant %int 1
    %float_9 = OpConstant %float 9
%float_3_14159274 = OpConstant %float 3.14159274
    %float_5 = OpConstant %float 5
    %float_2 = OpConstant %float 2
    %float_8 = OpConstant %float 8
    %float_4 = OpConstant %float 4
%float_9_99999975en05 = OpConstant %float 9.99999975e-05
    %uint_25 = OpConstant %uint 25
%_arr_v4float_uint_25 = OpTypeArray %v4float %uint_25
%_ptr_Input__arr_v4float_uint_25 = OpTypePointer Input %_arr_v4float_uint_25
%directionalLightSpacePositions = OpVariable %_ptr_Input__arr_v4float_uint_25 Input
%_ptr_Input_v4float = OpTypePointer Input %v4float
%_arr_10_uint_25 = OpTypeArray %10 %uint_25
%_ptr_UniformConstant__arr_10_uint_25 = OpTypePointer UniformConstant %_arr_10_uint_25
%u_DirectShadowMaps = OpVariable %_ptr_UniformConstant__arr_10_uint_25 UniformConstant
%_ptr_Input_v3float = OpTypePointer Input %v3float
%viewDirectionNormal = OpVariable %_ptr_Input_v3float Input
 %PointLight = OpTypeStruct %v4float %v3float %float %float %float
%_arr_PointLight_uint_25 = OpTypeArray %PointLight %uint_25
%DirectLight = OpTypeStruct %v4float %v3float %v3float
%_arr_DirectLight_uint_25 = OpTypeArray %DirectLight %uint_25
%UniformBufferObject = OpTypeStruct %_arr_PointLight_uint_25 %_arr_DirectLight_uint_25 %v3float %v3float %v3float %float %float %float %float %int %int
%_ptr_Private_UniformBufferObject = OpTypePointer Private %UniformBufferObject
        %ubo = OpVariable %_ptr_Private_UniformBufferObject Private
      %int_2 = OpConstant %int 2
%_ptr_Private_v3float = OpTypePointer Private %v3float
%fragPosition = OpVariable %_ptr_Input_v3float Input
      %int_5 = OpConstant %int 5
%_ptr_Private_float = OpTypePointer Private %float
      %int_6 = OpConstant %int 6
      %int_3 = OpConstant %int 3
%float_0_0399999991 = OpConstant %float 0.0399999991
        %344 = OpConstantComposite %v3float %float_0_0399999991 %float_0_0399999991 %float_0_0399999991
        %350 = OpConstantComposite %v3float %float_0 %float_0 %float_0
      %int_9 = OpConstant %int 9
%_ptr_Private_int = OpTypePointer Private %int
%_ptr_Private_v4float = OpTypePointer Private %v4float
     %int_10 = OpConstant %int 10
      %int_4 = OpConstant %int 4
        %491 = OpTypeImage %float Cube 0 0 0 1 Unknown
        %492 = OpTypeSampledImage %491
%_ptr_UniformConstant_492 = OpTypePointer UniformConstant %492
%u_IrradianceMap = OpVariable %_ptr_UniformConstant_492 UniformConstant
%u_PrefilterMap = OpVariable %_ptr_UniformConstant_492 UniformConstant
%u_BRDFLookupTexture = OpVariable %_ptr_UniformConstant_10 UniformConstant
     %uint_1 = OpConstant %uint 1
      %int_7 = OpConstant %int 7
        %555 = OpConstantComposite %v3float %float_1 %float_1 %float_1
%float_0_454545468 = OpConstant %float 0.454545468
        %560 = OpConstantComposite %v3float %float_0_454545468 %float_0_454545468 %float_0_454545468
%_ptr_Output_v4float = OpTypePointer Output %v4float
 %FragColour = OpVariable %_ptr_Output_v4float Output
%float_0_100000001 = OpConstant %float 0.100000001
        %569 = OpConstantComposite %v3float %float_0_100000001 %float_0_100000001 %float_0_100000001
      %int_8 = OpConstant %int 8
%_ptr_Input_v2float = OpTypePointer Input %v2float
   %texCoord = OpVariable %_ptr_Input_v2float Input
%mat3v3float = OpTypeMatrix %v3float 3
%_ptr_Input_mat3v3float = OpTypePointer Input %mat3v3float
        %TBN = OpVariable %_ptr_Input_mat3v3float Input
%u_AlbedoMap = OpVariable %_ptr_UniformConstant_10 UniformConstant
%u_RoughnessMap = OpVariable %_ptr_UniformConstant_10 UniformConstant
%u_NormalMap = OpVariable %_ptr_UniformConstant_10 UniformConstant
%u_MetallicMap = OpVariable %_ptr_UniformConstant_10 UniformConstant
       %main = OpFunction %void None %3
          %5 = OpLabel
        %N_2 = OpVariable %_ptr_Function_v3float Function
        %V_1 = OpVariable %_ptr_Function_v3float Function
%roughness_0 = OpVariable %_ptr_Function_float Function
 %metallic_0 = OpVariable %_ptr_Function_float Function
   %albedo_0 = OpVariable %_ptr_Function_v3float Function
       %F0_1 = OpVariable %_ptr_Function_v3float Function
         %Lo = OpVariable %_ptr_Function_v3float Function
        %i_0 = OpVariable %_ptr_Function_int Function
       %Wi_0 = OpVariable %_ptr_Function_v3float Function
        %H_1 = OpVariable %_ptr_Function_v3float Function
       %Li_0 = OpVariable %_ptr_Function_v3float Function
        %k_2 = OpVariable %_ptr_Function_float Function
        %i_1 = OpVariable %_ptr_Function_int Function
%lightPosition = OpVariable %_ptr_Function_v3float Function
       %Wi_1 = OpVariable %_ptr_Function_v3float Function
        %H_2 = OpVariable %_ptr_Function_v3float Function
   %distance = OpVariable %_ptr_Function_float Function
%attenuation = OpVariable %_ptr_Function_float Function
       %Li_1 = OpVariable %_ptr_Function_v3float Function
        %k_3 = OpVariable %_ptr_Function_float Function
    %fresnel = OpVariable %_ptr_Function_v3float Function
       %kS_0 = OpVariable %_ptr_Function_v3float Function
       %kD_0 = OpVariable %_ptr_Function_v3float Function
 %irradiance = OpVariable %_ptr_Function_v3float Function
    %diffuse = OpVariable %_ptr_Function_v3float Function
          %R = OpVariable %_ptr_Function_v3float Function
%prefilteredColour = OpVariable %_ptr_Function_v3float Function
       %brdf = OpVariable %_ptr_Function_v2float Function
 %specular_0 = OpVariable %_ptr_Function_v3float Function
    %ambient = OpVariable %_ptr_Function_v3float Function
     %colour = OpVariable %_ptr_Function_v3float Function
        %312 = OpLoad %v3float %viewDirectionNormal
               OpStore %N_2 %312
        %323 = OpAccessChain %_ptr_Private_v3float %ubo %int_2
        %324 = OpLoad %v3float %323
        %326 = OpLoad %v3float %fragPosition
        %327 = OpFSub %v3float %324 %326
        %328 = OpExtInst %v3float %1 Normalize %327
               OpStore %V_1 %328
        %332 = OpAccessChain %_ptr_Private_float %ubo %int_5
        %333 = OpLoad %float %332
               OpStore %roughness_0 %333
        %336 = OpAccessChain %_ptr_Private_float %ubo %int_6
        %337 = OpLoad %float %336
               OpStore %metallic_0 %337
        %340 = OpAccessChain %_ptr_Private_v3float %ubo %int_3
        %341 = OpLoad %v3float %340
               OpStore %albedo_0 %341
        %345 = OpLoad %v3float %albedo_0
        %346 = OpLoad %float %metallic_0
        %347 = OpCompositeConstruct %v3float %346 %346 %346
        %348 = OpExtInst %v3float %1 FMix %344 %345 %347
               OpStore %F0_1 %348
               OpStore %Lo %350
               OpStore %i_0 %int_0
               OpBranch %352
        %352 = OpLabel
               OpLoopMerge %354 %355 None
               OpBranch %356
        %356 = OpLabel
        %357 = OpLoad %int %i_0
        %360 = OpAccessChain %_ptr_Private_int %ubo %int_9
        %361 = OpLoad %int %360
        %362 = OpSLessThan %bool %357 %361
               OpBranchConditional %362 %353 %354
        %353 = OpLabel
        %364 = OpLoad %int %i_0
        %365 = OpAccessChain %_ptr_Private_v3float %ubo %int_1 %364 %int_2
        %366 = OpLoad %v3float %365
               OpStore %Wi_0 %366
        %368 = OpLoad %v3float %V_1
        %369 = OpLoad %v3float %Wi_0
        %370 = OpFAdd %v3float %368 %369
        %371 = OpExtInst %v3float %1 Normalize %370
               OpStore %H_1 %371
        %373 = OpLoad %int %i_0
        %375 = OpAccessChain %_ptr_Private_v4float %ubo %int_1 %373 %int_0
        %376 = OpLoad %v4float %375
        %377 = OpVectorShuffle %v3float %376 %376 0 1 2
               OpStore %Li_0 %377
        %379 = OpLoad %float %roughness_0
        %380 = OpFunctionCall %float %SchlickGGXRoughnessRemapperDirect_f1_ %379
               OpStore %k_2 %380
        %381 = OpLoad %v3float %N_2
        %382 = OpLoad %v3float %H_1
        %383 = OpLoad %v3float %F0_1
        %384 = OpLoad %v3float %V_1
        %385 = OpLoad %v3float %Wi_0
        %386 = OpLoad %v3float %Li_0
        %387 = OpLoad %v3float %albedo_0
        %388 = OpLoad %float %k_2
        %389 = OpLoad %float %roughness_0
        %390 = OpLoad %float %metallic_0
        %391 = OpLoad %int %i_0
        %392 = OpFunctionCall %v3float %CookTorranceBRDF_vf3_vf3_vf3_vf3_vf3_vf3_vf3_f1_f1_f1_i1_ %381 %382 %383 %384 %385 %386 %387 %388 %389 %390 %391
        %393 = OpLoad %v3float %Lo
        %394 = OpFAdd %v3float %393 %392
               OpStore %Lo %394
               OpBranch %355
        %355 = OpLabel
        %395 = OpLoad %int %i_0
        %396 = OpIAdd %int %395 %int_1
               OpStore %i_0 %396
               OpBranch %352
        %354 = OpLabel
               OpStore %i_1 %int_0
               OpBranch %398
        %398 = OpLabel
               OpLoopMerge %400 %401 None
               OpBranch %402
        %402 = OpLabel
        %403 = OpLoad %int %i_1
        %405 = OpAccessChain %_ptr_Private_int %ubo %int_10
        %406 = OpLoad %int %405
        %407 = OpSLessThan %bool %403 %406
               OpBranchConditional %407 %399 %400
        %399 = OpLabel
        %409 = OpLoad %int %i_1
        %410 = OpAccessChain %_ptr_Private_v3float %ubo %int_0 %409 %int_1
        %411 = OpLoad %v3float %410
               OpStore %lightPosition %411
        %413 = OpLoad %v3float %lightPosition
        %414 = OpLoad %v3float %fragPosition
        %415 = OpFSub %v3float %413 %414
        %416 = OpExtInst %v3float %1 Normalize %415
               OpStore %Wi_1 %416
        %418 = OpLoad %v3float %V_1
        %419 = OpLoad %v3float %Wi_1
        %420 = OpFAdd %v3float %418 %419
        %421 = OpExtInst %v3float %1 Normalize %420
               OpStore %H_2 %421
        %423 = OpLoad %v3float %lightPosition
        %424 = OpLoad %v3float %fragPosition
        %425 = OpFSub %v3float %423 %424
        %426 = OpExtInst %float %1 Length %425
               OpStore %distance %426
        %428 = OpLoad %int %i_1
        %429 = OpAccessChain %_ptr_Private_float %ubo %int_0 %428 %int_2
        %430 = OpLoad %float %429
        %431 = OpLoad %int %i_1
        %432 = OpAccessChain %_ptr_Private_float %ubo %int_0 %431 %int_3
        %433 = OpLoad %float %432
        %434 = OpLoad %float %distance
        %435 = OpFMul %float %433 %434
        %436 = OpFAdd %float %430 %435
        %437 = OpLoad %int %i_1
        %439 = OpAccessChain %_ptr_Private_float %ubo %int_0 %437 %int_4
        %440 = OpLoad %float %439
        %441 = OpLoad %float %distance
        %442 = OpLoad %float %distance
        %443 = OpFMul %float %441 %442
        %444 = OpFMul %float %440 %443
        %445 = OpFAdd %float %436 %444
        %446 = OpFDiv %float %float_1 %445
               OpStore %attenuation %446
        %448 = OpLoad %int %i_1
        %449 = OpAccessChain %_ptr_Private_v4float %ubo %int_0 %448 %int_0
        %450 = OpLoad %v4float %449
        %451 = OpCompositeExtract %float %450 0
        %452 = OpCompositeExtract %float %450 1
        %453 = OpCompositeExtract %float %450 2
        %454 = OpCompositeConstruct %v3float %451 %452 %453
        %455 = OpLoad %float %attenuation
        %456 = OpVectorTimesScalar %v3float %454 %455
               OpStore %Li_1 %456
        %458 = OpLoad %float %roughness_0
        %459 = OpFunctionCall %float %SchlickGGXRoughnessRemapperDirect_f1_ %458
               OpStore %k_3 %459
        %460 = OpLoad %v3float %N_2
        %461 = OpLoad %v3float %H_2
        %462 = OpLoad %v3float %F0_1
        %463 = OpLoad %v3float %V_1
        %464 = OpLoad %v3float %Wi_1
        %465 = OpLoad %v3float %Li_1
        %466 = OpLoad %v3float %albedo_0
        %467 = OpLoad %float %k_3
        %468 = OpLoad %float %roughness_0
        %469 = OpLoad %float %metallic_0
        %470 = OpLoad %int %i_1
        %471 = OpFunctionCall %v3float %CookTorranceBRDF_vf3_vf3_vf3_vf3_vf3_vf3_vf3_f1_f1_f1_i1_ %460 %461 %462 %463 %464 %465 %466 %467 %468 %469 %470
        %472 = OpLoad %v3float %Lo
        %473 = OpFAdd %v3float %472 %471
               OpStore %Lo %473
               OpBranch %401
        %401 = OpLabel
        %474 = OpLoad %int %i_1
        %475 = OpIAdd %int %474 %int_1
               OpStore %i_1 %475
               OpBranch %398
        %400 = OpLabel
        %477 = OpLoad %v3float %N_2
        %478 = OpLoad %v3float %V_1
        %479 = OpDot %float %477 %478
        %480 = OpExtInst %float %1 FMax %479 %float_0
        %481 = OpLoad %v3float %F0_1
        %482 = OpLoad %float %roughness_0
        %483 = OpFunctionCall %v3float %FresnelSchlickRoughness_f1_vf3_f1_ %480 %481 %482
               OpStore %fresnel %483
        %485 = OpLoad %v3float %fresnel
               OpStore %kS_0 %485
        %487 = OpLoad %v3float %kS_0
        %488 = OpCompositeConstruct %v3float %float_1 %float_1 %float_1
        %489 = OpFSub %v3float %488 %487
               OpStore %kD_0 %489
        %495 = OpLoad %492 %u_IrradianceMap
        %496 = OpLoad %v3float %N_2
        %497 = OpImageSampleImplicitLod %v4float %495 %496
        %498 = OpVectorShuffle %v3float %497 %497 0 1 2
               OpStore %irradiance %498
        %500 = OpLoad %v3float %irradiance
        %501 = OpLoad %v3float %albedo_0
        %502 = OpFMul %v3float %500 %501
               OpStore %diffuse %502
        %504 = OpLoad %v3float %V_1
        %505 = OpFNegate %v3float %504
        %506 = OpLoad %v3float %N_2
        %507 = OpExtInst %v3float %1 Reflect %505 %506
               OpStore %R %507
        %510 = OpLoad %492 %u_PrefilterMap
        %511 = OpLoad %v3float %R
        %512 = OpLoad %float %roughness_0
        %513 = OpFMul %float %512 %float_4
        %514 = OpImageSampleExplicitLod %v4float %510 %511 Lod %513
        %515 = OpVectorShuffle %v3float %514 %514 0 1 2
               OpStore %prefilteredColour %515
        %518 = OpLoad %10 %u_BRDFLookupTexture
        %519 = OpLoad %v3float %N_2
        %520 = OpLoad %v3float %V_1
        %521 = OpDot %float %519 %520
        %522 = OpExtInst %float %1 FMax %521 %float_0
        %523 = OpLoad %float %roughness_0
        %524 = OpCompositeConstruct %v2float %522 %523
        %525 = OpImageSampleImplicitLod %v4float %518 %524
        %526 = OpVectorShuffle %v2float %525 %525 0 1
               OpStore %brdf %526
        %528 = OpLoad %v3float %prefilteredColour
        %529 = OpLoad %v3float %fresnel
        %530 = OpAccessChain %_ptr_Function_float %brdf %uint_0
        %531 = OpLoad %float %530
        %532 = OpVectorTimesScalar %v3float %529 %531
        %534 = OpAccessChain %_ptr_Function_float %brdf %uint_1
        %535 = OpLoad %float %534
        %536 = OpCompositeConstruct %v3float %535 %535 %535
        %537 = OpFAdd %v3float %532 %536
        %538 = OpFMul %v3float %528 %537
               OpStore %specular_0 %538
        %540 = OpLoad %v3float %kD_0
        %541 = OpLoad %v3float %diffuse
        %542 = OpFMul %v3float %540 %541
        %543 = OpLoad %v3float %specular_0
        %544 = OpFAdd %v3float %542 %543
        %546 = OpAccessChain %_ptr_Private_float %ubo %int_7
        %547 = OpLoad %float %546
        %548 = OpVectorTimesScalar %v3float %544 %547
               OpStore %ambient %548
        %550 = OpLoad %v3float %ambient
        %551 = OpLoad %v3float %Lo
        %552 = OpFAdd %v3float %550 %551
               OpStore %colour %552
        %553 = OpLoad %v3float %colour
        %554 = OpLoad %v3float %colour
        %556 = OpFAdd %v3float %554 %555
        %557 = OpFDiv %v3float %553 %556
               OpStore %colour %557
        %558 = OpLoad %v3float %colour
        %561 = OpExtInst %v3float %1 Pow %558 %560
               OpStore %colour %561
        %564 = OpAccessChain %_ptr_Private_v3float %ubo %int_4
        %565 = OpLoad %v3float %564
        %566 = OpLoad %v3float %colour
        %567 = OpFAdd %v3float %565 %566
        %570 = OpFAdd %v3float %567 %569
        %572 = OpAccessChain %_ptr_Private_float %ubo %int_8
        %573 = OpLoad %float %572
        %574 = OpCompositeExtract %float %570 0
        %575 = OpCompositeExtract %float %570 1
        %576 = OpCompositeExtract %float %570 2
        %577 = OpCompositeConstruct %v4float %574 %575 %576 %573
               OpStore %FragColour %577
               OpReturn
               OpFunctionEnd
%ShadowCalculation_vf4_vf3_s21_vf3_ = OpFunction %float None %12
%lightSpacePos = OpFunctionParameter %v4float
   %lightDir = OpFunctionParameter %v3float
  %shadowMap = OpFunctionParameter %_ptr_UniformConstant_10
     %normal = OpFunctionParameter %v3float
         %18 = OpLabel
%projectedCoords = OpVariable %_ptr_Function_v3float Function
%closestDepth = OpVariable %_ptr_Function_float Function
%currentDepth = OpVariable %_ptr_Function_float Function
 %shadowBias = OpVariable %_ptr_Function_float Function
     %shadow = OpVariable %_ptr_Function_float Function
  %texelSize = OpVariable %_ptr_Function_v2float Function
          %x = OpVariable %_ptr_Function_int Function
          %y = OpVariable %_ptr_Function_int Function
   %pcfDepth = OpVariable %_ptr_Function_float Function
         %69 = OpVectorShuffle %v3float %lightSpacePos %lightSpacePos 0 1 2
         %72 = OpCompositeExtract %float %lightSpacePos 3
         %73 = OpCompositeConstruct %v3float %72 %72 %72
         %74 = OpFDiv %v3float %69 %73
         %76 = OpVectorTimesScalar %v3float %74 %float_0_5
         %77 = OpCompositeConstruct %v3float %float_0_5 %float_0_5 %float_0_5
         %78 = OpFAdd %v3float %76 %77
               OpStore %projectedCoords %78
         %81 = OpAccessChain %_ptr_Function_float %projectedCoords %uint_2
         %82 = OpLoad %float %81
         %85 = OpFOrdGreaterThan %bool %82 %float_1
               OpSelectionMerge %87 None
               OpBranchConditional %85 %86 %87
         %86 = OpLabel
               OpReturnValue %float_0
         %87 = OpLabel
         %91 = OpLoad %10 %shadowMap
         %93 = OpLoad %v3float %projectedCoords
         %94 = OpVectorShuffle %v2float %93 %93 0 1
         %95 = OpImageSampleImplicitLod %v4float %91 %94
         %97 = OpCompositeExtract %float %95 0
               OpStore %closestDepth %97
         %99 = OpAccessChain %_ptr_Function_float %projectedCoords %uint_2
        %100 = OpLoad %float %99
               OpStore %currentDepth %100
        %103 = OpDot %float %normal %lightDir
        %104 = OpFSub %float %float_1 %103
        %105 = OpFMul %float %float_0_0500000007 %104
        %107 = OpExtInst %float %1 FMax %105 %float_0_00499999989
               OpStore %shadowBias %107
               OpStore %shadow %float_0
        %111 = OpLoad %10 %shadowMap
        %113 = OpImage %9 %111
        %115 = OpImageQuerySizeLod %v2int %113 %int_0
        %116 = OpConvertSToF %v2float %115
        %117 = OpCompositeConstruct %v2float %float_1 %float_1
        %118 = OpFDiv %v2float %117 %116
               OpStore %texelSize %118
               OpStore %x %int_n1
               OpBranch %122
        %122 = OpLabel
               OpLoopMerge %124 %125 None
               OpBranch %126
        %126 = OpLabel
        %127 = OpLoad %int %x
        %129 = OpSLessThanEqual %bool %127 %int_1
               OpBranchConditional %129 %123 %124
        %123 = OpLabel
               OpStore %y %int_n1
               OpBranch %131
        %131 = OpLabel
               OpLoopMerge %133 %134 None
               OpBranch %135
        %135 = OpLabel
        %136 = OpLoad %int %y
        %137 = OpSLessThanEqual %bool %136 %int_1
               OpBranchConditional %137 %132 %133
        %132 = OpLabel
        %139 = OpLoad %10 %shadowMap
        %140 = OpLoad %v3float %projectedCoords
        %141 = OpVectorShuffle %v2float %140 %140 0 1
        %142 = OpLoad %int %x
        %143 = OpConvertSToF %float %142
        %144 = OpLoad %int %y
        %145 = OpConvertSToF %float %144
        %146 = OpCompositeConstruct %v2float %143 %145
        %147 = OpLoad %v2float %texelSize
        %148 = OpFMul %v2float %146 %147
        %149 = OpFAdd %v2float %141 %148
        %150 = OpImageSampleImplicitLod %v4float %139 %149
        %151 = OpCompositeExtract %float %150 0
               OpStore %pcfDepth %151
        %152 = OpLoad %float %currentDepth
        %153 = OpLoad %float %shadowBias
        %154 = OpFSub %float %152 %153
        %155 = OpLoad %float %pcfDepth
        %156 = OpFOrdGreaterThan %bool %154 %155
        %157 = OpSelect %float %156 %float_1 %float_0
        %158 = OpLoad %float %shadow
        %159 = OpFAdd %float %158 %157
               OpStore %shadow %159
               OpBranch %134
        %134 = OpLabel
        %160 = OpLoad %int %y
        %161 = OpIAdd %int %160 %int_1
               OpStore %y %161
               OpBranch %131
        %133 = OpLabel
               OpBranch %125
        %125 = OpLabel
        %162 = OpLoad %int %x
        %163 = OpIAdd %int %162 %int_1
               OpStore %x %163
               OpBranch %122
        %124 = OpLabel
        %165 = OpLoad %float %shadow
        %166 = OpFDiv %float %165 %float_9
               OpStore %shadow %166
               OpReturnValue %166
               OpFunctionEnd
%DistrubutionGGX_vf3_vf3_f1_ = OpFunction %float None %19
          %N = OpFunctionParameter %v3float
          %H = OpFunctionParameter %v3float
          %a = OpFunctionParameter %float
         %24 = OpLabel
      %aPow2 = OpVariable %_ptr_Function_float Function
      %NdotH = OpVariable %_ptr_Function_float Function
  %NdotHPow2 = OpVariable %_ptr_Function_float Function
%denominator = OpVariable %_ptr_Function_float Function
        %170 = OpFMul %float %a %a
               OpStore %aPow2 %170
        %172 = OpDot %float %N %H
        %173 = OpExtInst %float %1 FMax %172 %float_0
               OpStore %NdotH %173
        %175 = OpLoad %float %NdotH
        %176 = OpLoad %float %NdotH
        %177 = OpFMul %float %175 %176
               OpStore %NdotHPow2 %177
        %179 = OpLoad %float %NdotHPow2
        %180 = OpLoad %float %aPow2
        %181 = OpFSub %float %180 %float_1
        %182 = OpFMul %float %179 %181
        %183 = OpFAdd %float %182 %float_1
               OpStore %denominator %183
        %185 = OpLoad %float %denominator
        %186 = OpFMul %float %float_3_14159274 %185
        %187 = OpLoad %float %denominator
        %188 = OpFMul %float %186 %187
               OpStore %denominator %188
        %189 = OpLoad %float %aPow2
        %190 = OpLoad %float %denominator
        %191 = OpFDiv %float %189 %190
               OpReturnValue %191
               OpFunctionEnd
%FresnelSchlick_f1_vf3_ = OpFunction %v3float None %25
   %cosTheta = OpFunctionParameter %float
         %F0 = OpFunctionParameter %v3float
         %29 = OpLabel
        %194 = OpCompositeConstruct %v3float %float_1 %float_1 %float_1
        %195 = OpFSub %v3float %194 %F0
        %196 = OpFSub %float %float_1 %cosTheta
        %198 = OpExtInst %float %1 Pow %196 %float_5
        %199 = OpVectorTimesScalar %v3float %195 %198
        %200 = OpFAdd %v3float %F0 %199
               OpReturnValue %200
               OpFunctionEnd
%FresnelSchlickRoughness_f1_vf3_f1_ = OpFunction %v3float None %30
 %cosTheta_0 = OpFunctionParameter %float
%baseReflectivity = OpFunctionParameter %v3float
  %roughness = OpFunctionParameter %float
         %35 = OpLabel
        %203 = OpFSub %float %float_1 %roughness
        %204 = OpCompositeConstruct %v3float %203 %203 %203
        %205 = OpExtInst %v3float %1 FMax %204 %baseReflectivity
        %206 = OpFSub %v3float %205 %baseReflectivity
        %207 = OpFSub %float %float_1 %cosTheta_0
        %208 = OpExtInst %float %1 FClamp %207 %float_0 %float_1
        %209 = OpExtInst %float %1 Pow %208 %float_5
        %210 = OpVectorTimesScalar %v3float %206 %209
        %211 = OpFAdd %v3float %baseReflectivity %210
               OpReturnValue %211
               OpFunctionEnd
%SchlickGGXRoughnessRemapperDirect_f1_ = OpFunction %float None %36
        %a_0 = OpFunctionParameter %float
         %39 = OpLabel
        %214 = OpFAdd %float %a_0 %float_1
        %216 = OpExtInst %float %1 Pow %214 %float_2
        %218 = OpFDiv %float %216 %float_8
               OpReturnValue %218
               OpFunctionEnd
%GeometrySchlickGGX_f1_f1_ = OpFunction %float None %40
      %NdotV = OpFunctionParameter %float
          %k = OpFunctionParameter %float
         %44 = OpLabel
        %221 = OpFSub %float %float_1 %k
        %222 = OpFMul %float %NdotV %221
        %223 = OpFAdd %float %222 %k
        %224 = OpFDiv %float %NdotV %223
               OpReturnValue %224
               OpFunctionEnd
%GeometrySmith_vf3_vf3_vf3_f1_ = OpFunction %float None %45
        %N_0 = OpFunctionParameter %v3float
          %V = OpFunctionParameter %v3float
          %L = OpFunctionParameter %v3float
        %k_0 = OpFunctionParameter %float
         %51 = OpLabel
    %NdotV_0 = OpVariable %_ptr_Function_float Function
      %NdotL = OpVariable %_ptr_Function_float Function
       %ggx1 = OpVariable %_ptr_Function_float Function
       %ggx2 = OpVariable %_ptr_Function_float Function
        %228 = OpDot %float %N_0 %V
        %229 = OpExtInst %float %1 FMax %228 %float_0
               OpStore %NdotV_0 %229
        %231 = OpDot %float %N_0 %L
        %232 = OpExtInst %float %1 FMax %231 %float_0
               OpStore %NdotL %232
        %234 = OpLoad %float %NdotV_0
        %235 = OpFunctionCall %float %GeometrySchlickGGX_f1_f1_ %234 %k_0
               OpStore %ggx1 %235
        %237 = OpLoad %float %NdotL
        %238 = OpFunctionCall %float %GeometrySchlickGGX_f1_f1_ %237 %k_0
               OpStore %ggx2 %238
        %239 = OpLoad %float %ggx1
        %240 = OpLoad %float %ggx2
        %241 = OpFMul %float %239 %240
               OpReturnValue %241
               OpFunctionEnd
%CookTorranceBRDF_vf3_vf3_vf3_vf3_vf3_vf3_vf3_f1_f1_f1_i1_ = OpFunction %v3float None %53
        %N_1 = OpFunctionParameter %v3float
        %H_0 = OpFunctionParameter %v3float
       %F0_0 = OpFunctionParameter %v3float
        %V_0 = OpFunctionParameter %v3float
         %Wi = OpFunctionParameter %v3float
         %Li = OpFunctionParameter %v3float
     %albedo = OpFunctionParameter %v3float
        %k_1 = OpFunctionParameter %float
        %a_1 = OpFunctionParameter %float
   %metallic = OpFunctionParameter %float
          %i = OpFunctionParameter %int
         %66 = OpLabel
          %F = OpVariable %_ptr_Function_v3float Function
          %G = OpVariable %_ptr_Function_float Function
          %D = OpVariable %_ptr_Function_float Function
 %cosTheta_1 = OpVariable %_ptr_Function_float Function
         %kS = OpVariable %_ptr_Function_v3float Function
         %kD = OpVariable %_ptr_Function_v3float Function
   %specular = OpVariable %_ptr_Function_v3float Function
   %shadow_0 = OpVariable %_ptr_Function_float Function
        %245 = OpDot %float %H_0 %N_1
        %246 = OpExtInst %float %1 FMax %245 %float_0
        %247 = OpFunctionCall %v3float %FresnelSchlick_f1_vf3_ %246 %F0_0
               OpStore %F %247
        %249 = OpFunctionCall %float %GeometrySmith_vf3_vf3_vf3_f1_ %N_1 %V_0 %Wi %k_1
               OpStore %G %249
        %251 = OpFunctionCall %float %DistrubutionGGX_vf3_vf3_f1_ %N_1 %H_0 %a_1
               OpStore %D %251
        %253 = OpDot %float %N_1 %Wi
        %254 = OpExtInst %float %1 FMax %253 %float_0
               OpStore %cosTheta_1 %254
        %256 = OpLoad %v3float %F
               OpStore %kS %256
        %258 = OpLoad %v3float %kS
        %259 = OpCompositeConstruct %v3float %float_1 %float_1 %float_1
        %260 = OpFSub %v3float %259 %258
        %261 = OpFSub %float %float_1 %metallic
        %262 = OpVectorTimesScalar %v3float %260 %261
               OpStore %kD %262
        %264 = OpLoad %v3float %kS
        %265 = OpLoad %v3float %F
        %266 = OpLoad %float %G
        %267 = OpVectorTimesScalar %v3float %265 %266
        %268 = OpLoad %float %D
        %269 = OpVectorTimesScalar %v3float %267 %268
        %271 = OpCompositeConstruct %v3float %float_4 %float_4 %float_4
        %272 = OpFDiv %v3float %269 %271
        %273 = OpDot %float %N_1 %V_0
        %274 = OpExtInst %float %1 FMax %273 %float_0
        %275 = OpVectorTimesScalar %v3float %272 %274
        %276 = OpLoad %float %cosTheta_1
        %277 = OpVectorTimesScalar %v3float %275 %276
        %279 = OpCompositeConstruct %v3float %float_9_99999975en05 %float_9_99999975en05 %float_9_99999975en05
        %280 = OpFAdd %v3float %277 %279
        %281 = OpFMul %v3float %264 %280
               OpStore %specular %281
        %288 = OpAccessChain %_ptr_Input_v4float %directionalLightSpacePositions %i
        %289 = OpLoad %v4float %288
        %293 = OpAccessChain %_ptr_UniformConstant_10 %u_DirectShadowMaps %i
        %294 = OpFunctionCall %float %ShadowCalculation_vf4_vf3_s21_vf3_ %289 %Wi %293 %N_1
               OpStore %shadow_0 %294
        %295 = OpLoad %v3float %kD
        %296 = OpFMul %v3float %295 %albedo
        %297 = OpCompositeConstruct %v3float %float_3_14159274 %float_3_14159274 %float_3_14159274
        %298 = OpFDiv %v3float %296 %297
        %299 = OpLoad %v3float %specular
        %300 = OpFAdd %v3float %298 %299
        %301 = OpFMul %v3float %300 %Li
        %302 = OpLoad %float %cosTheta_1
        %303 = OpVectorTimesScalar %v3float %301 %302
        %304 = OpLoad %float %shadow_0
        %305 = OpFSub %float %float_1 %304
        %306 = OpVectorTimesScalar %v3float %303 %305
               OpReturnValue %306
               OpFunctionEnd